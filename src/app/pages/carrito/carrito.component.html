<div class="container">
  <div class="products-list">
    <h2>Carrito</h2>
    <div *ngFor="let carrito of carritos" class="product-item">
      <div class="product-image">
        <img [src]="carrito.imagenProducto" alt="{{carrito.nombreProducto}}">
      </div>
      <div class="product-details">
        <span class="product-name">{{carrito.nombreProducto}}</span>
        <span class="product-gender">Género: {{carrito.catProducto}}</span>
        <span class="product-size">Talla: {{carrito.talla}}</span>
      </div>
      <div class="price-details">
        <span class="product-discounted-price">S/. {{carrito.precioProducto}}</span> <span class="product-discount">-30%</span>
        <span class="product-price">S/. {{carrito.precioProducto * 1.3 | number: '1.2-2'}}</span>
        
      </div>
      <div class="product-controls">
        <input type="number" [(ngModel)]="carrito.cantidadProducto" (change)="actualizarCarrito(carrito)" min="1" max="10">
        <span>Máx 10 unidades</span>
      </div>
      <div class="product-actions">
        <button class="remove-button" (click)="eliminarProducto(carrito.idCarrito)">
          <img src="https://static.vecteezy.com/system/resources/previews/009/344/493/original/x-transparent-free-png.png" alt="Eliminar producto">
        </button>
      </div>
    </div>
  </div>
  <div class="cart-summary">
    <h2>Resumen de la orden</h2>
    <div class="cart-details">
      <p><span>Subtotal:</span><span class="price">S/. {{ calcularSubtotal() }}</span></p>
      <p><span>IGV (18%):</span><span class="price">S/. {{ calcularIGV() }}</span></p>
      <p><span>Total:</span><span class="price">S/. {{ calcularTotal() }}</span></p>
    </div>
    <button class="process-purchase" (click)="handleSuccessfulPayment()">Procesar la compra</button>
  </div>

  <div class="d-flex justify-content-center align-items-center" style="min-height: 100vh;">
    <div *ngIf="cargando" class="loading-overlay">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p>Cargando...</p>
    </div>
  </div>
</div>
